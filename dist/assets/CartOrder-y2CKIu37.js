import{_ as z,i as g,j as q,A as w,a as l,o as d,d as t,f as b,t as a,F as h,k as _,b as N,p as O,D as V,y as x,z as k,l as B,e as D}from"./index-BaYYEV3U.js";import{u as F}from"./cartStores-G-R677xd.js";const T={class:"container py-5"},A={class:"mb-4 p-4 bg-light rounded border"},L={class:"mb-4"},j=["src"],M={class:"text-muted"},R={class:"small text-muted"},U={class:"mt-2"},$={class:"text-end bg-success text-white p-2 mt-3 rounded"},E={class:"mb-4 p-4 bg-light rounded border"},G={class:"btn-group mb-3"},H={class:"mb-4"},J={class:"mb-2 text-end"},K={class:"fs-5 text-success"},Q={class:"form-check mb-3"},W={class:"d-flex gap-3"},X=["disabled"],Y="https://yygang-bucket.s3.ap-northeast-2.amazonaws.com/SupplementCharactor.png",Z={__name:"CartOrderForm",props:{cartItems:{type:Array,required:!0}},setup(i){B();const n=k();g(1);const r=g(!1),v=["카드","계좌 이체","무통장 입금"],u=i,c=g({name:"",phone:"",address:""}),I=async()=>{const o=localStorage.getItem("accessToken");try{const s=await x.get("/user/my-page",{headers:{Authorization:`Bearer ${o}`}});c.value=s.data}catch(s){console.error("사용자 정보 불러오기 실패:",s),alert("사용자 정보를 불러오는 데 실패했습니다.")}};q(()=>{I()});const p=o=>o.toLocaleString()+"원",m=w(()=>u.cartItems.reduce((o,s)=>o+s.itemPrice*s.quantity,0)),C=()=>{n.go(-1)},P=async()=>{var o,s;try{const e=u.cartItems.map(y=>({supplement_id:y.nsupplementId,count:y.quantity}));console.log(e);const f=await x.post("/order",e),S=f.data.orderId;f.status===200?n.push({name:"orderComplete",query:{orderId:S}}):(alert("주문 실패"),n.go(-1))}catch(e){console.log(e),alert(((s=(o=e.response)==null?void 0:o.data)==null?void 0:s.message)||"주문 중 오류가 발생했습니다."),n.go(-1)}};return(o,s)=>(d(),l("div",T,[t("section",A,[s[1]||(s[1]=t("h5",{class:"fw-bold"},"배송지",-1)),t("p",null,[t("strong",null,a(c.value.name),1),b(" "+a(c.value.phone),1)]),t("p",null,a(c.value.address),1),s[2]||(s[2]=t("input",{type:"text",class:"form-control mt-3",placeholder:"배송 메모를 입력해주세요"},null,-1))]),t("section",L,[s[5]||(s[5]=t("h5",{class:"fw-bold"},"주문상품",-1)),(d(!0),l(h,null,_(i.cartItems,e=>(d(),l("div",{key:e.cartOptionId,class:"d-flex align-items-center mb-3"},[t("img",{src:e.productImage||Y,alt:"상품 이미지",class:"img-thumbnail me-3",style:{width:"60px",height:"60px","object-fit":"cover"}},null,8,j),t("div",null,[t("div",null,[t("strong",null,a(e.nsupplementName),1),s[3]||(s[3]=b()),t("small",M,a(e.brand),1)]),t("div",R,"옵션: "+a(e.productOption)+" | 수량: "+a(e.quantity),1)])]))),128)),t("div",U,[t("strong",null,a(p(m.value)),1)]),t("div",$,[s[4]||(s[4]=b(" 총 주문 금액: ")),t("strong",null,a(p(m.value)),1)])]),t("section",E,[s[6]||(s[6]=t("h5",{class:"fw-bold"},"결제 수단",-1)),t("div",G,[(d(),l(h,null,_(v,e=>t("button",{class:"btn btn-outline-secondary",key:e},a(e),1)),64))]),s[7]||(s[7]=N('<div class="d-flex flex-wrap gap-2 mb-3" data-v-06ed71f6><span class="badge bg-success" data-v-06ed71f6><img src="https://yygang-bucket.s3.ap-northeast-2.amazonaws.com/badge_npay.png" style="width:40px;height:auto;" data-v-06ed71f6></span><span class="badge bg-warning text-dark" data-v-06ed71f6><img src="https://yygang-bucket.s3.ap-northeast-2.amazonaws.com/payment_icon_yellow_medium.png" style="width:40px;height:auto;" data-v-06ed71f6></span><span class="badge bg-primary" data-v-06ed71f6><img src="https://yygang-bucket.s3.ap-northeast-2.amazonaws.com/TossPay_Logo_Primary.png" style="width:30px;height:auto;" data-v-06ed71f6></span></div><div class="row" data-v-06ed71f6><div class="col-md-6" data-v-06ed71f6><select class="form-select mb-3" data-v-06ed71f6><option data-v-06ed71f6>카카오 뱅크</option><option data-v-06ed71f6>국민은행</option></select></div><div class="col-md-6" data-v-06ed71f6><select class="form-select mb-3" data-v-06ed71f6><option data-v-06ed71f6>일시불</option><option data-v-06ed71f6>3개월 할부</option></select></div></div>',2))]),t("section",H,[s[9]||(s[9]=t("h5",{class:"fw-bold"},"결제 상세",-1)),s[10]||(s[10]=t("div",{class:"mb-2"},[t("input",{type:"text",class:"form-control",value:"신용카드",disabled:""})],-1)),t("div",J,[t("strong",K,a(p(m.value)),1)]),t("div",Q,[O(t("input",{class:"form-check-input",type:"checkbox",id:"agree","onUpdate:modelValue":s[0]||(s[0]=e=>r.value=e)},null,512),[[V,r.value]]),s[8]||(s[8]=t("label",{class:"form-check-label",for:"agree"}," [필수] 서비스 이용 약관, 개인정보 처리 동의 ",-1))]),t("div",W,[t("button",{class:"btn btn-outline-secondary w-50",onClick:C},"결제취소"),t("button",{class:"btn btn-success w-50",disabled:!r.value,onClick:P},"결제하기",8,X)])])]))}},tt=z(Z,[["__scopeId","data-v-06ed71f6"]]),at={__name:"CartOrder",setup(i){const n=F();k();const r=w(()=>n.cartItems);return console.log(n.cartItems),console.log(r),(v,u)=>(d(),l("div",null,[D(tt,{cartItems:r.value},null,8,["cartItems"])]))}};export{at as default};
