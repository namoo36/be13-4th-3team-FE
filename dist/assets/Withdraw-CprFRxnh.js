import{_ as p,u,i as w,a as m,d as s,f as o,p as g,v as f,z as h,y as l,o as v}from"./index-BaYYEV3U.js";const y={class:"pwd-modify"},b={class:"pwd-info"},k={class:"mb-3"},_={__name:"Withdraw",setup(x){const r=h(),i=u(),a=w({password:""}),d=async()=>{if(console.log(a.value.password),!a.value.password){alert("비밀번호를 입력해주세요.");return}const t=localStorage.getItem("accessToken");if(!t){r.push("/login");return}try{if(!(await l.get("/user/my-page/verify-pwd",{params:{oldPassword:a.value.password}},{headers:{Authorization:`Bearer ${t}`}})).data){alert("기존 비밀번호가 일치하지 않습니다.");return}(await l.delete("/user/my-page/withdraw",{params:{password:a.value.password}},{headers:{Authorization:`Bearer ${t}`}})).status===200&&(alert("회원 탈퇴가 완료되었습니다."),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userInfo"),i.isLoggedIn=!1,r.push({name:"login"}))}catch(e){console.error(e),alert("회원 탈퇴에 실패했습니다. 다시 시도해주세요.")}},c=()=>{r.go(-1)};return(t,e)=>(v(),m("div",y,[e[4]||(e[4]=s("h2",{class:"page-title"},"회원 탈퇴",-1)),s("div",b,[e[2]||(e[2]=s("h5",{class:"warning-title"},[s("img",{src:"https://yygang-bucket.s3.ap-northeast-2.amazonaws.com/free-icon-crying-face-18404984.png",style:{width:"36px",height:"auto"}}),o(" 진짜 가시려구요..? ")],-1)),e[3]||(e[3]=s("p",{class:"warning-text"},[o(" 비밀번호를 입력하시면 회원 탈퇴가 완료됩니다."),s("br"),o(" 탈퇴 후 모든 개인정보는 삭제됩니다."),s("br"),o(" 회원 탈퇴를 하시겠습니까? ")],-1)),s("div",k,[e[1]||(e[1]=s("label",{for:"password",class:"form-label"},"비밀번호",-1)),g(s("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":e[0]||(e[0]=n=>a.value.password=n),placeholder:"비밀번호를 입력해 주세요.",required:""},null,512),[[f,a.value.password,void 0,{trim:!0}]])]),s("div",{class:"form-actions"},[s("button",{onClick:d,class:"btn btn-primary",style:{"margin-right":"10px"}},"탈퇴하기"),s("button",{onClick:c,class:"btn btn-secondary"},"취소")])])]))}},S=p(_,[["__scopeId","data-v-4a9df787"]]);export{S as default};
