import{_ as w,u as g,a as m,o as f,k as y,d as t,f as b,t as l,e as p,w as _,r as v,q as D,F as C,z as x,l as h,m as $,i as k,j as I,y as q}from"./index-BaYYEV3U.js";const A={class:"answer mt-4"},R={class:"a-title-box align-items-center d-flex"},E={class:"a-title fw-bold fs-2"},Q={class:"a-content fs-5 mt-3"},L={class:"a-info d-flex"},T={class:"createAt me-4"},B={class:"helpful d-flex"},S={class:"btn-section text-end"},N={class:"btn btn-success rounded-pill px-3 me-1",type:"button"},V={__name:"AnswerDetail",props:{answerData:{type:Array,required:!0}},setup(a){const r=g(),c=r.userInfo;return console.log("authStore",r),console.log("userInfo",c),(n,s)=>{const o=v("RouterLink");return f(!0),m(C,null,y(a.answerData,(d,u)=>(f(),m("div",{class:"a-box border",key:u},[t("div",A,[t("div",R,[t("div",E,[s[1]||(s[1]=t("img",{src:"https://yygang-bucket.s3.ap-northeast-2.amazonaws.com/doctor.png",class:"doctor-icon me-3"},null,-1)),b(" "+l(d.userId)+" 약사님의 답변 ",1)])]),t("div",Q,l(d.answerContent),1),s[6]||(s[6]=t("div",{class:"tag"},null,-1)),t("div",L,[t("div",T,l(d.answerDate),1),s[2]||(s[2]=t("div",{class:"count"},"조회수 : 3",-1))]),t("div",B,[s[4]||(s[4]=t("button",{class:"btn btn-success rounded-pill px-3 me-1",type:"button"},"도움이 되요",-1)),s[5]||(s[5]=t("div",{class:"helpful-text"},[t("span",{class:"fw-bold"},"??"),b("명에게 도움이 되었습니다.")],-1)),t("div",S,[t("button",N,[p(o,{class:"text-decoration-none text-white","answer-data":a.answerData,to:{name:"answerEdit"}},{default:_(()=>s[3]||(s[3]=[b("수정하기")])),_:1},8,["answer-data"])]),t("button",{class:"btn btn-danger rounded-pill px-3",type:"button",onClick:s[0]||(s[0]=D(i=>{n.confirmDelete(n.questionData.qboardId)},["stop"]))}," 삭제 ")])])])]))),128)}}},j=w(V,[["__scopeId","data-v-bd51674e"]]),z={class:"q-box border mb-5"},F={class:"question mt-4"},M={class:"q-title fw-bold fs-2 mb-3"},P={class:"fs-5"},O={class:"q-info row"},G={class:"d-flex-column col"},H={class:"createAt"},J={class:"count"},K={class:"col text-end"},U={class:"btn btn-success rounded-pill px-3 me-1",type:"button"},W={__name:"QuestionDetail",props:{questionData:{type:Object,required:!0}},emits:["delete-question"],setup(a,{emit:r}){x(),h();const c=r,n=s=>{confirm("정말로 삭제하시겠습니까?")&&c("delete-question",s)};return(s,o)=>{const d=v("RouterLink");return f(),m("div",z,[t("div",F,[t("div",M,[t("p",null,l(a.questionData.qboardTitle),1)]),t("div",P,[t("p",null,l(a.questionData.qboardContent),1)])]),t("div",O,[t("div",G,[t("div",H," 작성일 :"+l(a.questionData.qboardDate),1),t("div",J," 조회수 :"+l(a.questionData.viewCount),1)]),t("div",K,[t("button",U,[p(d,{class:"text-decoration-none text-white",to:{name:"addanswer"}},{default:_(()=>o[2]||(o[2]=[b("답글달기")])),_:1})]),t("button",{class:"btn btn-success rounded-pill px-3 me-1",type:"button",onEditClick:o[0]||(o[0]=(...u)=>s.editClick&&s.editClick(...u))},[p(d,{class:"text-decoration-none text-white",to:{name:"questionEdit"}},{default:_(()=>o[3]||(o[3]=[b("수정하기")])),_:1})],32),t("button",{class:"btn btn-danger rounded-pill px-3",type:"button",onClick:o[1]||(o[1]=D(u=>{n(a.questionData.qboardId)},["stop"]))}," 삭제 ")])])])}}},X=w(W,[["__scopeId","data-v-0a45aa43"]]),Z={__name:"QustuionBoardDetail",setup(a){const r=x(),c=h(),n=$({qboardTitle:"",qboardContent:"",qboardDate:"",viewCount:""}),s=k({}),o=async i=>{try{const e=await q.get(`/qboard/${i}`);console.log("API Response:",e),n.qboardId=e.data.qboardId,n.qboardTitle=e.data.qboardTitle,n.qboardContent=e.data.qboardContent,n.qboardDate=e.data.qboardDate,n.viewCount=e.data.viewCount}catch(e){console.error("Error fetching question:",e),e.response.data.code===404?(alert(e.response.data.message),r.push({name:"questionboard"})):alert("에러가 발생했습니다.")}},d=async i=>{try{const e=await q.get(`/qboard/${i}/answers`);console.log("fetchAnswerasdas API Response:",e),console.log("answerdata",e.data),s.value=e.data}catch(e){console.error("Error fetching question:",e),e.response.data.code===404?(alert(e.response.data.message),r.push({name:"questionboard"})):alert("에러가 발생했습니다.")}},u=async i=>{try{(await q.delete(`/qboard/${i}`)).data.code===200&&(alert("정상적으로 삭제되었습니다."),r.push({name:"questionboard"}))}catch(e){e.response.data.code===403?alert("권한이 없는 사용자입니다."):e.response.data.code===404?alert(e.response.data.message):alert("에러가 발생했습니다.")}};return I(()=>{o(c.params.id),d(c.params.id)}),(i,e)=>(f(),m("div",null,[p(X,{"question-data":n,onDeleteQuestion:u},null,8,["question-data"]),p(j,{"answer-data":s.value},null,8,["answer-data"])]))}};export{Z as default};
