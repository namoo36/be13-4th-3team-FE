import{_ as O,i as g,l as f,j as x,a as b,o as y,d as t,f as v,t as s,b as S,F as z,k as C,p as P,D as V,y as h,z as _,m as j,e as B}from"./index-BaYYEV3U.js";const D={class:"container py-5"},F={class:"mb-4 p-4 bg-light rounded border"},T={class:"mb-4"},L={class:"d-flex align-items-center"},R=["src"],$={class:"text-muted"},M={class:"small text-muted"},U={class:"mt-2"},A={class:"text-end bg-success text-white p-2 mt-3 rounded"},E={class:"mb-4 p-4 bg-light rounded border"},J={class:"btn-group mb-3"},G={class:"mb-4"},H={class:"mb-2 text-end"},K={class:"fs-5 text-success"},Q={class:"form-check mb-3"},W={class:"d-flex gap-3"},X=["disabled"],Y={__name:"OrderForm",props:{nsupplement:{type:Object,required:!0}},setup(o){const p=f(),n=_(),c=g(Number(p.query.quantity)||1),r=g(!1),a=["카드","계좌 이체","무통장 입금"],i=g({name:"",phone:"",address:""}),w=async()=>{const d=localStorage.getItem("accessToken");try{const e=await h.get("/user/my-page",{headers:{Authorization:`Bearer ${d}`}});i.value=e.data}catch(e){console.error("사용자 정보 불러오기 실패:",e),alert("사용자 정보를 불러오는 데 실패했습니다.")}};x(()=>{w()});const k=()=>{n.go(-1)},I=o,N=async()=>{var d,e;try{const l=[{supplement_id:I.nsupplement.productId,count:c.value}],u=await h.post("/order",l);console.log(u.data.orderId),console.log(u.data),console.log(u);const q=u.data.orderId;u.status===200?n.push({name:"orderComplete",query:{orderId:q}}):(alert("주문 실패"),n.go(-1))}catch(l){alert(((e=(d=l.response)==null?void 0:d.data)==null?void 0:e.message)||"주문 중 오류가 발생했습니다."),n.go(-1)}},m=d=>d.toLocaleString()+"원";return(d,e)=>(y(),b("div",D,[t("section",F,[e[1]||(e[1]=t("h5",{class:"fw-bold"},"배송지",-1)),t("p",null,[t("strong",null,s(i.value.name),1),v(" "+s(i.value.phone),1)]),t("p",null,s(i.value.address),1),e[2]||(e[2]=t("input",{type:"text",class:"form-control mt-3",placeholder:"배송 메모를 입력해주세요"},null,-1))]),t("section",T,[e[5]||(e[5]=t("h5",{class:"fw-bold"},"주문상품",-1)),t("div",L,[t("img",{src:o.nsupplement.productImage,alt:"상품 이미지",class:"img-thumbnail me-3",style:{width:"60px",height:"60px","object-fit":"cover"}},null,8,R),t("div",null,[t("div",null,[t("strong",null,s(o.nsupplement.productName),1),e[3]||(e[3]=v()),t("small",$,s(o.nsupplement.brand),1)]),t("div",M,"옵션: "+s(o.nsupplement.productName)+" | 수량: "+s(c.value),1)])]),t("div",U,[t("strong",null,s(m(o.nsupplement.price*c.value)),1)]),t("div",A,[e[4]||(e[4]=v(" 총 주문 금액: ")),t("strong",null,s(m(o.nsupplement.price*c.value)),1)])]),t("section",E,[e[6]||(e[6]=t("h5",{class:"fw-bold"},"결제 수단",-1)),t("div",J,[(y(),b(z,null,C(a,l=>t("button",{class:"btn btn-outline-secondary",key:l},s(l),1)),64))]),e[7]||(e[7]=S('<div class="d-flex flex-wrap gap-2 mb-3" data-v-28ec2270><span class="badge bg-success" data-v-28ec2270><img src="https://yygang-bucket.s3.ap-northeast-2.amazonaws.com/badge_npay.png" style="width:40px;height:auto;" data-v-28ec2270></span><span class="badge bg-warning text-dark" data-v-28ec2270><img src="https://yygang-bucket.s3.ap-northeast-2.amazonaws.com/payment_icon_yellow_medium.png" style="width:40px;height:auto;" data-v-28ec2270></span><span class="badge bg-primary" data-v-28ec2270><img src="https://yygang-bucket.s3.ap-northeast-2.amazonaws.com/TossPay_Logo_Primary.png" style="width:30px;height:auto;" data-v-28ec2270></span></div><div class="row" data-v-28ec2270><div class="col-md-6" data-v-28ec2270><select class="form-select mb-3" data-v-28ec2270><option data-v-28ec2270>카카오 뱅크</option><option data-v-28ec2270>국민은행</option></select></div><div class="col-md-6" data-v-28ec2270><select class="form-select mb-3" data-v-28ec2270><option data-v-28ec2270>일시불</option><option data-v-28ec2270>3개월 할부</option></select></div></div>',2))]),t("section",G,[e[9]||(e[9]=t("h5",{class:"fw-bold"},"결제 상세",-1)),e[10]||(e[10]=t("div",{class:"mb-2"},[t("input",{type:"text",class:"form-control",value:"신용카드",disabled:""})],-1)),t("div",H,[t("strong",K,s(m(o.nsupplement.price*c.value)),1)]),t("div",Q,[P(t("input",{class:"form-check-input",type:"checkbox",id:"agree","onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l)},null,512),[[V,r.value]]),e[8]||(e[8]=t("label",{class:"form-check-label",for:"agree"}," [필수] 서비스 이용 약관, 개인정보 처리 동의 ",-1))]),t("div",W,[t("button",{class:"btn btn-outline-secondary w-50",onClick:k},"결제취소"),t("button",{class:"btn btn-success w-50",disabled:!r.value,onClick:N},"결제하기",8,X)])])]))}},Z=O(Y,[["__scopeId","data-v-28ec2270"]]),et={__name:"Order",setup(o){_();const p=f(),n=j([]),c=async r=>{try{const a=await h.get(`/nsupplement/${r}`);console.log(a);const i=typeof a.data=="string"?JSON.parse(a.data):a.data;console.log(a.data),Object.assign(n,i),console.log("최종 nsupplement:",n)}catch(a){console.log(a)}};return x(()=>{c(p.params.productId)}),(r,a)=>(y(),b("div",null,[B(Z,{nsupplement:n,quantity:r.quantity},null,8,["nsupplement","quantity"])]))}};export{et as default};
