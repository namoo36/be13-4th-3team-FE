import{_ as q,i as x,u as A,m as k,A as h,x as D,j as $,a as i,d as s,t as a,h as T,g as _,p as u,v as b,C as v,F as f,k as g,z as E,y as w,o as d}from"./index-BaYYEV3U.js";const B={class:"welcome-box d-flex justify-content-between align-items-center p-4 mb-5"},F={class:"fw-bold mb-2"},z={key:0,class:"user-page"},R={key:0,class:"user-info"},L={class:"info-item"},P={class:"info-box"},j={class:"info-item"},N={class:"info-box"},Y={class:"info-item"},H={class:"info-box"},O={class:"info-item"},G={class:"info-box"},J={class:"info-item"},K={class:"info-box"},Q={class:"info-item"},W={class:"info-box"},X={class:"info-item"},Z={class:"info-box"},ee={class:"form-actions"},se={key:1,class:"user-info"},oe={class:"info-item"},te={class:"info-box"},le={class:"mb-3"},ne={class:"mb-3"},ae={class:"mb-3"},re={class:"d-flex"},ie=["value"],de=["value"],ue=["value"],me={class:"mb-3"},pe={class:"mb-3"},ve={class:"mb-3"},fe={class:"form-actions"},be={key:1,class:"loading-message"},ge={__name:"MyPage",setup(ye){const n=x(null),y=E(),m=x(!1),c=A(),U=c.userInfo,t=k({name:"",role:"",birthday:"",gender:"",phone:"",address:""}),l=k({year:"",month:"",day:""}),I=h(()=>{const r=new Date().getFullYear();let e=[];for(let o=1900;o<=r;o++)e.push(o);return e}),S=["01","02","03","04","05","06","07","08","09","10","11","12"],V=h(()=>{const r=parseInt(l.month);let e=[];if(r>0){const o=new Date(l.year,r,0).getDate();for(let p=1;p<=o;p++)e.push(p<10?`0${p}`:p)}return e});D(()=>[l.year,l.month,l.day],()=>{l.year&&l.month&&l.day?t.birthday=`${l.year}-${l.month}-${l.day}`:t.birthday=""},{immediate:!0});const C=async()=>{const r=localStorage.getItem("accessToken");r||y.push("/login");try{const e=await w.get("/user/my-page",{headers:{Authorization:`Bearer ${r}`}});n.value=e.data,console.log(e.data),console.log(e),console.log(e.name),t.name=e.data.name,t.role=e.data.role,t.birthday=e.data.birthday,t.gender=e.data.gender,t.phone=e.data.phone,t.address=e.data.address,console.log(t),console.log(t.data),console.log(t.value),console.log(t.name)}catch{alert("에러가 발생했습니다.")}},M=async()=>{const r=localStorage.getItem("accessToken");r||y.push("/login");try{console.log(t);const e=await w.post("/user/my-page",t,{headers:{Authorization:`Bearer ${r}`}});alert("회원 정보가 성공적으로 수정되었습니다."),n.value={...n.value,...t},c.userInfo.name=n.value.name,m.value=!1}catch(e){alert("수정에 실패했습니다."),console.error("Error updating user info:",e)}};return $(()=>{C()}),(r,e)=>(d(),i(f,null,[s("div",B,[s("div",null,[s("p",F,a(T(U).name)+"님 환영합니다!",1),e[10]||(e[10]=s("p",null,"오늘도 건강한 하루 보내세요!",-1))]),e[11]||(e[11]=s("img",{src:"https://yygang-bucket.s3.ap-northeast-2.amazonaws.com/SupplementCharactor.png",alt:"캐릭터",class:"welcome-character"},null,-1))]),n.value?(d(),i("div",z,[e[32]||(e[32]=s("h2",{class:"page-title"},"마이 페이지",-1)),m.value?_("",!0):(d(),i("div",R,[s("div",L,[e[12]||(e[12]=s("strong",{class:"info-label"},"이메일",-1)),s("div",P,[s("p",null,a(n.value.email),1)])]),s("div",j,[e[13]||(e[13]=s("strong",{class:"info-label"},"이름",-1)),s("div",N,[s("p",null,a(n.value.name),1)])]),s("div",Y,[e[14]||(e[14]=s("strong",{class:"info-label"},"역할",-1)),s("div",H,[s("p",null,a(n.value.role),1)])]),s("div",O,[e[15]||(e[15]=s("strong",{class:"info-label"},"생년월일",-1)),s("div",G,[s("p",null,a(n.value.birthday),1)])]),s("div",J,[e[16]||(e[16]=s("strong",{class:"info-label"},"성별",-1)),s("div",K,[s("p",null,a(n.value.gender),1)])]),s("div",Q,[e[17]||(e[17]=s("strong",{class:"info-label"},"전화번호",-1)),s("div",W,[s("p",null,a(n.value.phone),1)])]),s("div",X,[e[18]||(e[18]=s("strong",{class:"info-label"},"주소",-1)),s("div",Z,[s("p",null,a(n.value.address),1)])]),e[19]||(e[19]=s("br",null,null,-1)),s("div",ee,[s("button",{onClick:e[0]||(e[0]=o=>m.value=!0),class:"btn btn-primary"},"수정하기")])])),m.value?(d(),i("div",se,[s("div",oe,[e[20]||(e[20]=s("strong",{class:"info-label"},"이메일",-1)),s("div",te,[s("p",null,a(n.value.email),1)])]),s("div",le,[e[21]||(e[21]=s("label",{for:"name",class:"form-label"},"이름",-1)),u(s("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":e[1]||(e[1]=o=>t.name=o),required:""},null,512),[[b,t.name,void 0,{trim:!0}]])]),s("div",ne,[e[23]||(e[23]=s("label",{for:"role",class:"form-label"},"역할",-1)),u(s("select",{class:"form-select",id:"role","onUpdate:modelValue":e[2]||(e[2]=o=>t.role=o),required:""},e[22]||(e[22]=[s("option",{value:""},"역할을 선택해주세요",-1),s("option",{value:"CUSTOMER"},"일반회원",-1),s("option",{value:"SELLER"},"판매자",-1),s("option",{value:"PHARMACIST"},"약사",-1)]),512),[[v,t.role]])]),s("div",ae,[e[27]||(e[27]=s("label",{for:"birthday",class:"form-label"},"생년월일",-1)),s("div",re,[u(s("select",{class:"form-select","onUpdate:modelValue":e[3]||(e[3]=o=>l.year=o),required:""},[e[24]||(e[24]=s("option",{value:""},"년",-1)),(d(!0),i(f,null,g(I.value,o=>(d(),i("option",{key:o,value:o},a(o),9,ie))),128))],512),[[v,l.year]]),u(s("select",{class:"form-select","onUpdate:modelValue":e[4]||(e[4]=o=>l.month=o),required:""},[e[25]||(e[25]=s("option",{value:""},"월",-1)),(d(),i(f,null,g(S,o=>s("option",{key:o,value:o},a(o),9,de)),64))],512),[[v,l.month]]),u(s("select",{class:"form-select","onUpdate:modelValue":e[5]||(e[5]=o=>l.day=o),required:""},[e[26]||(e[26]=s("option",{value:""},"일",-1)),(d(!0),i(f,null,g(V.value,o=>(d(),i("option",{key:o,value:o},a(o),9,ue))),128))],512),[[v,l.day]])])]),s("div",me,[e[29]||(e[29]=s("label",{for:"gender",class:"form-label"},"성별",-1)),u(s("select",{class:"form-select",id:"gender","onUpdate:modelValue":e[6]||(e[6]=o=>t.gender=o),required:""},e[28]||(e[28]=[s("option",{value:""},"성별을 선택해주세요",-1),s("option",{value:"Male"},"남성",-1),s("option",{value:"Female"},"여성",-1)]),512),[[v,t.gender]])]),s("div",pe,[e[30]||(e[30]=s("label",{for:"phone",class:"form-label"},"전화번호",-1)),u(s("input",{type:"text",class:"form-control",id:"phone","onUpdate:modelValue":e[7]||(e[7]=o=>t.phone=o),required:""},null,512),[[b,t.phone,void 0,{trim:!0}]])]),s("div",ve,[e[31]||(e[31]=s("label",{for:"address",class:"form-label"},"주소",-1)),u(s("input",{type:"text",class:"form-control",id:"address","onUpdate:modelValue":e[8]||(e[8]=o=>t.address=o),required:""},null,512),[[b,t.address,void 0,{trim:!0}]])]),s("div",fe,[s("button",{onClick:M,class:"btn btn-primary",style:{"margin-right":"10px"}},"저장하기"),s("button",{onClick:e[9]||(e[9]=o=>m.value=!1),class:"btn btn-secondary"},"취소")])])):_("",!0)])):(d(),i("div",be,e[33]||(e[33]=[s("p",null,"로딩 중...",-1)])))],64))}},xe=q(ge,[["__scopeId","data-v-63431221"]]);export{xe as default};
