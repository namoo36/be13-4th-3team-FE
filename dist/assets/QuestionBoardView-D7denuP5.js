import{_ as g,A as v,a as l,o as u,F as y,k as x,d as s,t as p,q as C,i as w,m as I,l as k,B as P,j as B,x as R,e as m,w as $,r as L,P as Q,y as f,z as A,f as V}from"./index-BaYYEV3U.js";const D=["onClick"],j={id:"qcard-question",class:"mb-3"},z={class:"question-item"},N={id:"qcard-question-title",class:"fs-2 d-flex"},E={class:""},F={id:"qcard-question-content"},M={id:"qcard-question-answer",class:"d-flex"},T={id:"qcard-question-answer-content"},O={__name:"QuestionBoardCard",props:{questionboard:{type:Array,required:!0},answers:{type:Object,required:!0}},emits:["item-click"],setup(b,{emit:r}){const i=b,c=r,d=v(()=>i.questionboard.map(a=>({...a,answers:i.answers[a.qboardId]||[]})));return(a,o)=>(u(),l("div",null,[(u(!0),l(y,null,x(d.value,(n,_)=>(u(),l("div",{key:n.qboardId,class:"border mb-3",id:"qcard"},[s("div",{id:"qcard-content",class:"mt-3 mb-4",onClick:C(q=>{c("item-click",n.qboardId)},["stop"])},[s("div",j,[s("div",z,[s("div",N,[o[0]||(o[0]=s("span",{id:"q",class:"fw-bold"},"Q.  ",-1)),s("p",E,p(n.qboardTitle),1)]),s("div",F,[s("p",null,p(n.qboardContent),1)])]),s("div",M,[o[1]||(o[1]=s("img",{src:"https://yygang-bucket.s3.ap-northeast-2.amazonaws.com/doctor.png",alt:"의사아이콘",id:"answer-icon",class:"me-2"},null,-1)),s("p",T,p(n.answers.length>0?n.answers[0].answerContent:"아직 답변이 없습니다."),1)])])],8,D)]))),128))]))}},S=g(O,[["__scopeId","data-v-4678cbe8"]]),U={class:"border-bottom mb-4 d-flex justify-content-between",id:"header"},W={class:"postbtn btn btn-success rounded-pill px-3",type:"button"},G={__name:"QuestionBoardView",setup(b){const r=w([]),i=w({}),c=k(),d=A(),a=I({currentPage:parseInt(c.query.page)||1,totalCount:0,pageLimit:5,listLimit:10}),o=async e=>{try{const t=await f.get(`/qboard?page=${e-1}&size=10`);r.value=t.data.qboardResponseDto,a.totalCount=t.data.totalElements,a.listLimit=10}catch(t){console.error("API 요청 중 오류 발생:",t)}},n=async e=>{try{const t=await f.get(`/qboard/${e}/answers`);i.value[e]=t.data||[]}catch(t){console.error(`답변 불러오기 실패 (qboardId: ${e})`,t)}},_=({page:e,totalPages:t})=>{e>=1&&e<=t&&d.push({name:"questionboard",query:{page:e}})};P((e,t)=>{a.currentPage=parseInt(e.query.page)||1,o(a.currentPage)}),B(async()=>{await o(a.currentPage),r.value.length>0&&await Promise.all(r.value.map(e=>n(e.qboardId)))}),R(c,()=>{a.currentPage=parseInt(c.query.page)||1,o(a.currentPage)});const q=e=>{if(console.log("클릭한 질문 번호:",e),!e){console.error("잘못된 ID 값:",e);return}d.push({name:"qboardDetail",params:{id:e}})};return(e,t)=>{const h=L("RouterLink");return u(),l("div",null,[s("div",U,[t[1]||(t[1]=s("span",{class:"fs-1 fw-bold pb-1"},"약 질문",-1)),s("button",W,[m(h,{class:"text-decoration-none text-white",to:{name:"addqdboard"}},{default:$(()=>t[0]||(t[0]=[V("등록하기")])),_:1})])]),m(S,{questionboard:r.value,answers:i.value,onItemClick:q},null,8,["questionboard","answers"]),m(Q,{pageInfo:a,onChangePage:_},null,8,["pageInfo"])])}}},J=g(G,[["__scopeId","data-v-7f731e47"]]);export{J as default};
