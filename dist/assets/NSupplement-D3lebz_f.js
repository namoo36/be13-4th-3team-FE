import{_ as A,a as r,o as u,d as s,t as g,F as E,k as N,q as O,i as p,l as U,m as D,B as F,j,e as T,p as k,v as z,E as K,C as G,b as W,P as Y,y as b,z as J,n as x}from"./index-BaYYEV3U.js";const Q={class:"container py-5"},X={class:"text-center mb-4"},Z={class:"row row-cols-2 row-cols-md-4 g-4"},ee=["onClick"],te={class:"product-card text-center position-relative h-100"},ne=["src"],se={class:"mb-1"},ae={class:"text-muted mb-2"},oe={__name:"NSupplementTable",props:{nsupplements:{type:Array,required:!0},pageInfo:{type:Object,required:!0}},emits:["item-click"],setup(I,{emit:_}){const v=_;return(f,o)=>(u(),r("div",Q,[s("p",X,"총 "+g(I.pageInfo.totalElements)+"개의 제품을 찾았습니다.",1),s("div",Z,[(u(!0),r(E,null,N(I.nsupplements,a=>(u(),r("div",{class:"col",key:a.productId,onClick:O(y=>{v("item-click",a.productId)},["stop"])},[s("div",te,[o[0]||(o[0]=s("button",{class:"icon-btn position-absolute top-0 end-0 m-2"},"♥",-1)),s("img",{src:a.productImage,class:"product-image mx-auto d-block mb-3",alt:"상품 이미지"},null,8,ne),s("h6",se,g(a.productName),1),s("p",ae,g(a.price)+" 원",1),o[1]||(o[1]=s("button",{class:"icon-btn"},"🛒",-1))])],8,ee))),128))])]))}},le=A(oe,[["__scopeId","data-v-539ddd61"]]),ie={class:"text-center my-3"},ce={class:"mb-4"},re={class:"d-flex flex-wrap"},ue=["onClick"],de={class:"mb-4"},pe={class:"d-flex flex-wrap"},me=["onClick"],ve={__name:"NSupplement",setup(I){const _=p([]),v=U(),f=J(),o=p(v.query.productName||""),a=p(v.query.sortType||""),y=p([]),S=p([]),l=p([]),i=p([]),d=D({currentPage:parseInt(v.query.page)||1,totalElements:0,pageLimit:5,listLimit:0}),w={GUT_HEALTH:"장 건강",EYE:"눈 건강",FATIGUE:"피로 개선",SKIN_HEALTH:"피부 건강",LIVER:"간 건강",SLEEP:"수면 개선",JOINT_HEALTH:"관절 건강",FITNESS:"체력 증진",BODY_FAT:"체지방 감소"},M={LUTEIN:"루테인",MAGNESIUM:"마그네슘",PROTEIN:"단백질",VITAMIN_B1:"비타민 B1",VITAMIN_B3:"비타민 B3"},C=async n=>{try{const e=await b.get("/nsupplement/info/search",{params:{productName:o.value||void 0,sortType:a.value||void 0,healthIds:l.value.length>0?l.value:void 0,ingredientIds:i.value.length>0?i.value:void 0,page:n-1,size:10},paramsSerializer:t=>{const c=new URLSearchParams;for(const m in t)Array.isArray(t[m])?t[m].forEach(H=>c.append(m,H)):t[m]!==void 0&&c.append(m,t[m]);return c.toString()}});console.log(e),_.value=e.data.content,d.totalElements=e.data.totalElements,d.listLimit=10}catch(e){console.log(e)}},P=async()=>{try{const e=(await b.get("/hfuncitems")).data.healthMap;y.value=Object.entries(e).map(([t,c])=>({id:Number(t),name:c}))}catch(n){console.log(n)}},L=async()=>{try{const e=(await b.get("/ingredients")).data.ingredientMap;S.value=Object.entries(e).map(([t,c])=>({id:Number(t),name:c}))}catch(n){console.log(n)}},R=({page:n,totalPages:e})=>{n>=1&&n<=e&&f.push({name:"nsupplement",query:{page:n}})},$=n=>{f.push({name:"nsupplement/productId",params:{productId:n}})},h=()=>{f.push({name:"nsupplement",query:{page:1,productName:o.value||void 0,sortType:a.value||void 0,healthIds:l.value.length>0?l.value:void 0,ingredientIds:i.value.length>0?i.value:void 0}})},q=()=>{o.value="",a.value="",l.value=[],i.value=[],f.push({name:"nsupplement",query:{page:1}})},B=n=>{const e=l.value.indexOf(n);e===-1?l.value.push(n):l.value.splice(e,1),h()},V=n=>{const e=i.value.indexOf(n);e===-1?i.value.push(n):i.value.splice(e,1),h()};return F((n,e)=>{d.currentPage=parseInt(n.query.page)||1,C(d.currentPage)}),j(()=>{P(),L(),C(d.currentPage)}),(n,e)=>(u(),r("main",null,[s("div",ie,[k(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.value=t),onKeyup:K(h,["enter"]),class:"form-control w-50 mx-auto",placeholder:"상품명을 입력하세요"},null,544),[[z,o.value]]),s("button",{class:"btn btn-primary",onClick:h},"검색"),k(s("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>a.value=t),class:"form-select w-auto",onChange:h},e[2]||(e[2]=[W('<option value="" data-v-288c10ef>기본정렬</option><option value="PRICE_ASC" data-v-288c10ef>가격낮은순</option><option value="PRICE_DESC" data-v-288c10ef>가격높은순</option><option value="NAME_ASC" data-v-288c10ef>이름순↓</option><option value="NAME_DESC" data-v-288c10ef>이름순↑</option><option value="REVIEW_ASC" data-v-288c10ef>리뷰순↓</option><option value="REVIEW_DESC" data-v-288c10ef>리뷰순↑</option>',7)]),544),[[G,a.value]]),s("button",{class:"btn btn-outline-secondary",onClick:q},"초기화")]),s("div",ce,[e[3]||(e[3]=s("h5",{class:"mb-2"},"건강 카테고리",-1)),s("div",re,[(u(!0),r(E,null,N(y.value,t=>(u(),r("button",{key:t.id,class:x(["btn btn-tag",{"selected-health":l.value.includes(t.id)}]),onClick:c=>B(t.id)}," # "+g(w[t.name]||t.name),11,ue))),128))])]),s("div",de,[e[4]||(e[4]=s("h5",{class:"mb-2"},"성분 카테고리",-1)),s("div",pe,[(u(!0),r(E,null,N(S.value,t=>(u(),r("button",{key:t.id,class:x(["btn btn-tag",{"selected-ingredient":i.value.includes(t.id)}]),onClick:c=>V(t.id)}," # "+g(M[t.name]||t.name),11,me))),128))])]),T(le,{nsupplements:_.value,pageInfo:d,onItemClick:$},null,8,["nsupplements","pageInfo"]),T(Y,{pageInfo:d,onChangePage:R},null,8,["pageInfo"])]))}},he=A(ve,[["__scopeId","data-v-288c10ef"]]);export{he as default};
