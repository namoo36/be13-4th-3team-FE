import{_,i as m,j as g,a as l,d as o,F as f,k as I,y as c,o as d,t as a}from"./index-BaYYEV3U.js";const v={class:"order-history"},h=["src"],D={class:"product-info"},w={class:"name"},y={class:"price"},E={class:"status"},N={class:"text"},C={class:"date"},k=["onClick"],L={__name:"OrderList",setup(O){const r=m([]),i=e=>{switch(e){case"PENDING":return"결제 대기";case"ORDERED":return"주문 완료";case"PAID":return"결제 완료";case"CANCELLED":return"주문 취소";case"IN_TRANSIT":return"배송 출발";case"DELIVERED":return"배송 완료";default:return e}},u=async()=>{try{const e=await c.get("/order");console.log(e.data),r.value=e.data;for(let s of r.value){const t=await c.get(`/nsupplement/productImage/${s.nsupplementId}`),n=await c.get(`/order/${s.orderId}`);s.productImage=t.data,s.orderDate=n.data.orderDate,s.status=n.data.status}console.log(r.value)}catch(e){console.error("주문 정보 조회 오류:",e)}},p=async e=>{if(window.confirm("정말 주문을 취소하시겠습니까?")){console.log("주문 취소:",e),console.log(e.orderId);try{(await c.post(`/order/${e.orderId}`)).status===200&&window.location.reload()}catch(t){alert("주문 취소 실패"),console.error("주문 취소 실패:",t)}}else console.log("주문 취소가 취소되었습니다."),alert("주문 취소가 취소되었습니다.")};return g(()=>{u()}),(e,s)=>(d(),l("div",v,[s[0]||(s[0]=o("h2",null,"주문 내역",-1)),s[1]||(s[1]=o("hr",null,null,-1)),(d(!0),l(f,null,I(r.value,(t,n)=>(d(),l("div",{key:n,class:"order-item"},[o("img",{src:t.productImage,alt:"상품 이미지",class:"product-image"},null,8,h),o("div",D,[o("div",w,a(t.nsupplementName),1),o("div",y,a(t.totalPrice)+"원 · "+a(t.quantity)+"개",1)]),o("div",E,[o("div",N,a(i(t.status)),1),o("div",C,a(t.orderDate),1)]),o("button",{class:"cancel-button",onClick:x=>p(t)},"주문 취소",8,k)]))),128))]))}},$=_(L,[["__scopeId","data-v-7ca678f1"]]);export{$ as default};
