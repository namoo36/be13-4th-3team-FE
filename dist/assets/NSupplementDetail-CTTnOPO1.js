import{_ as B,i as k,A as S,a,o,d as t,t as l,f as N,e as w,w as R,r as T,q as M,n as g,g as V,F as f,k as x,y as I,z as C,m as L,l as $,j}from"./index-BaYYEV3U.js";const E={class:"container my-5"},F={class:"row"},O={class:"col-md-4 text-center"},Q=["src"],z={class:"col-md-8"},D={class:"mb-2"},P={class:"text-muted"},U={class:"ms-2 fs-5"},G={class:"border p-3 rounded bg-light mb-3"},J={class:"d-flex justify-content-between align-items-center"},H={class:"d-flex gap-2 mb-4"},K={class:"btn btn-success w-100"},W={class:"nav nav-tabs mt-5"},X={class:"nav-item"},Y={class:"mt-3"},Z={key:0},tt={class:"table-responsive"},et={class:"table table-bordered"},nt={class:"ingredients-box"},st={key:1,class:"ingredient-box"},lt={colspan:"3"},at={class:"healthNames-box"},ot={key:1,class:"healthName-box"},ut={colspan:"5"},it={key:1},rt={key:2},dt={__name:"NSupplementForm",props:{nsupplement:Object},emits:["review-click"],setup(n,{emit:y}){const p=C(),v=y,b=c=>{switch(c){case"VITAMIN_B3":return"비타민 B3";case"VITAMIN_B1":return"비타민 B1";case"MAGNESIUM":return"마그네슘";case"PROTEIN":return"단백질";case"LUTEIN":return"루테인";default:return c}},r=n,d=async()=>{if(!r.nsupplement||!r.nsupplement.productId){alert("상품 정보가 아직 로드되지 않았습니다.");return}const c={nSupplementId:r.nsupplement.productId,quantity:u.value};console.log("전송될 requestBody:",c);try{await I.post("/cart/nsupplement",c),alert("장바구니에 상품이 추가되었습니다."),p.push({name:"cart"})}catch(e){const{code:m,message:i}=e.response.data;alert(m===409||m===404||m===400?i:"장바구니 추가 중 오류가 발생했습니다.")}},s=k("detail"),u=k(1),_=()=>u.value++,A=()=>{u.value>1&&u.value--},q=S(()=>r.nsupplement.price*u.value);return(c,e)=>{const m=T("RouterLink");return o(),a("div",E,[t("div",F,[t("div",O,[t("img",{src:n.nsupplement.productImage,alt:"상품 이미지",class:"img-fluid mb-3"},null,8,Q)]),t("div",z,[t("h4",null,l(n.nsupplement.productName),1),t("div",D,[t("del",P,l(n.nsupplement.price)+"원",1),e[2]||(e[2]=t("strong",{class:"text-danger ms-2"},"0%",-1)),t("span",U,l(n.nsupplement.price)+"원",1)]),e[5]||(e[5]=t("div",{class:"mb-3 text-muted"},[t("p",null,[N("택배 배송 | "),t("span",{class:"text-success"},"무료 배송")]),t("p",{class:"small"},"제주/도서지역 추가 배송비 있음")],-1)),t("div",G,[t("div",J,[t("div",null,l(n.nsupplement.productName),1),t("div",null,[t("button",{class:"btn btn-sm btn-outline-secondary me-1",onClick:A},"-"),t("span",null,l(u.value),1),t("button",{class:"btn btn-sm btn-outline-secondary ms-1",onClick:_},"+")]),t("div",null,l(q.value.toLocaleString())+"원",1)])]),t("div",H,[t("button",K,[w(m,{class:"nav-link",to:{name:"order",query:{quantity:u.value}}},{default:R(()=>e[3]||(e[3]=[N("구매하기")])),_:1},8,["to"])]),t("button",{class:"btn btn-outline-dark",onClick:d},"장바구니"),e[4]||(e[4]=t("button",{class:"btn btn-outline-dark"},"🤍",-1))])])]),t("ul",W,[t("li",X,[t("a",{class:g(["nav-link",{active:s.value==="detail"}]),href:"#",onClick:e[0]||(e[0]=M(i=>s.value="detail",["prevent"]))},"상세 정보",2)]),t("button",{type:"button",class:g(["btn",s.value==="review"?"btn-primary":"btn-outline-primary"]),onClick:e[1]||(e[1]=i=>v("review-click",n.nsupplement.productId))}," 리뷰 "+l(n.nsupplement.reviewCount),3),t("button",{type:"button",class:g(["btn",s.value==="qna"?"btn-primary":"btn-outline-primary"])}," Q&A ",2)]),t("div",Y,[s.value==="detail"?(o(),a("div",Z,[t("div",tt,[t("table",et,[t("tbody",null,[t("tr",null,[e[6]||(e[6]=t("th",null,"상품번호",-1)),t("td",null,l(n.nsupplement.productId),1),e[7]||(e[7]=t("th",null,"상품명",-1)),t("td",null,l(n.nsupplement.productName),1),e[8]||(e[8]=t("th",null,"브랜드",-1)),t("td",null,l(n.nsupplement.brand),1)]),t("tr",null,[e[9]||(e[9]=t("th",null,"주성분",-1)),t("td",null,[t("div",nt,[Array.isArray(n.nsupplement.ingredients)&&n.nsupplement.ingredients.length>0?(o(!0),a(f,{key:0},x(n.nsupplement.ingredients,(i,h)=>(o(),a("span",{key:h,class:"ingredient-box"},l(b(i)),1))),128)):(o(),a("span",st," 정보 없음 "))])]),e[10]||(e[10]=t("th",null,"효능",-1)),t("td",lt,[t("div",at,[Array.isArray(n.nsupplement.healthNames)&&n.nsupplement.healthNames.length>0?(o(!0),a(f,{key:0},x(n.nsupplement.healthNames,(i,h)=>(o(),a("span",{key:h,class:"healthName-box"},l(b(i)),1))),128)):(o(),a("span",ot," 정보 없음 "))])])]),t("tr",null,[e[11]||(e[11]=t("th",null,"주의사항",-1)),t("td",ut,l(n.nsupplement.caution),1)])])])])])):s.value==="review"?(o(),a("div",it,e[12]||(e[12]=[t("p",null,"리뷰",-1)]))):s.value==="qna"?(o(),a("div",rt,e[13]||(e[13]=[t("p",null,"Q&A",-1)]))):V("",!0)])])}}},ct=B(dt,[["__scopeId","data-v-acd00003"]]),pt={__name:"NSupplementDetail",setup(n){const y=C(),p=$(),v=L([]);Number(p.params.productId);const b=async d=>{try{const s=await I.get(`/nsupplement/${d}`);console.log(s);const u=typeof s.data=="string"?JSON.parse(s.data):s.data;Object.assign(v,u)}catch(s){console.log(s)}},r=d=>{y.push(`/nsupplement/${d}/review`)};return j(()=>{b(p.params.productId)}),(d,s)=>(o(),a("div",null,[w(ct,{nsupplement:v,onReviewClick:r},null,8,["nsupplement"])]))}};export{pt as default};
